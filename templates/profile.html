<!DOCTYPE html>{% extends "base.html" %} {% block title %}Profile - {{
user.username }}{% endblock %} {% block content %}
<div class="container mt-5">
  <h1>Profile: {{ user.username }}</h1>

  <!-- Display user profile information -->
  <div class="row">
    <div class="col-md-4">
      {% if user.avatar %}
      <img
        src="{{ url_for('static', filename = 'profile_pics/' ~ user.avatar) }}"
        alt="Profile Picture"
        class="img-thumbnail"
      />
      {% else %}
      <img
        src="{{ url_for('static', filename = 'profile_pics/default.jpg') }}"
        alt="Default Profile Picture"
        class="img-thumbnail"
      />
      {% endif %}
    </div>
    <div class="col-md-8">
      <h2>{{ user.username }}</h2>
      <p>{{ user.bio }}</p>
      {% if user.social_media %}
      <p><a href="{{ user.social_media }}" target="blank">Social Media</a></p>
      {% endif %}
    </div>
  </div>

  <!-- Profile Update Form-->
  <h2>Update Profile</h2>
  <form method="post" enctype="multipart/form-data">
    {{ form.hidden_tag() }}
    <div class="form-group">
      {{ form.username.label }} {{ form.username(class="form-control") }}
    </div>
    <div class="form-group">
      {{ form.bio.label }} {{ form.bio(class="form-control") }}
    </div>
    <div class="form-group">
      {{ form.social_media.label }} {{ form.social_media(class="form-control")
      }}
    </div>
    <div class="form-group">
      {{ form.avatar.label }} {{ form.avatar(class="form-control-file") }}
    </div>
    <div class="form-group">{{ form.submit(class="btn btn-primary") }}</div>
  </form>

  <!-- Display user posts and comments -->
  <h2>Posts:</h2>
  {% for post in posts %}
  <div class="card mb-4">
    <div class="card-body">
      <h2 class="card-title">{{ post.title }}</h2>
      <p class="card-text">{{ post.content }}</p>
      <a
        href="{{ url_for('view_post', post_id=post.id) }}"
        class="btn btn-primary"
        >Read More</a
      >
    </div>
    <div class="card-footer text-muted">
      Posted on {{ post.date_posted.strftime('%B %d, %Y') }} by {{ post.author
      }}
    </div>
  </div>
  {% endfor %}
  <h2>Comments:</h2>
  {% for comment in comments %}
  <div class="card mb-3">
    <div class="card-body">
      <p class="card-text">{{ comment.content }}</p>
      <p class="card-text">
        <small class="text-muted"
          >Posted on {{ comment.date_posted.strftime('%B %d, %Y') }}</small
        >
      </p>
      <a
        href="{{ url_for('view_post', post_id=comment.post_id) }}"
        class="btn btn-secondary"
        >View Post</a
      >
    </div>
  </div>
  {% endfor %}
</div>
{% endblock %}
